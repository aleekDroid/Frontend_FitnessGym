/* src/app/pages/admin/dashboard/dashboard.component.scss */

.dash-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 32px;
}

.date-filter {
  display: flex;
  align-items: flex-end;
  gap: 12px;
  flex-wrap: wrap;
}
.date-input-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
  label { font-size: 0.78rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: rgba(238,238,238,0.45); }
}
.date-input {
  padding: 9px 12px;
  min-width: 150px;
  color-scheme: dark;
}

/* ── KPI Grid ── */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
  margin-bottom: 28px;
}

.kpi-card {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 24px;
  display: flex;
  gap: 18px;
  align-items: flex-start;
  position: relative;
  overflow: hidden;
  transition: transform 0.2s;
  &:hover { transform: translateY(-2px); }

  &::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
  &--revenue::before { background: linear-gradient(90deg, #D84040, #ff6b6b); }
  &--members::before { background: linear-gradient(90deg, #1565c0, #42a5f5); }
  &--subs::before    { background: linear-gradient(90deg, #6a1b9a, #ab47bc); }
  &--products::before{ background: linear-gradient(90deg, #2e7d32, #66bb6a); }
}

.kpi-icon {
  width: 48px; height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  .kpi-card--revenue & { background: rgba(216,64,64,0.2); color: var(--accent); }
  .kpi-card--members & { background: rgba(21,101,192,0.2); color: #42a5f5; }
  .kpi-card--subs    & { background: rgba(106,27,154,0.2); color: #ab47bc; }
  .kpi-card--products & { background: rgba(46,125,50,0.2);  color: #66bb6a; }
}

.kpi-label {
  font-size: 0.78rem;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(238,238,238,0.45);
  margin-bottom: 6px;
}
.kpi-value {
  font-family: var(--font-display);
  font-size: 2rem;
  letter-spacing: 0.03em;
  line-height: 1;
  color: var(--light);
  margin-bottom: 4px;
}
.kpi-sub {
  font-size: 0.78rem;
  color: rgba(238,238,238,0.35);
}

/* ── Bar Chart ── */
.chart-card {
  margin-bottom: 24px;
  padding: 28px;
  position: relative;
}

.chart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 32px;
}
.chart-title {
  font-family: var(--font-display);
  font-size: 1.3rem;
  letter-spacing: 0.05em;
}
.chart-legend { display: flex; gap: 20px; }
.legend-item  { display: flex; align-items: center; gap: 6px; font-size: 0.82rem; color: rgba(238,238,238,0.6); font-weight: 600; }
.legend-dot {
  width: 10px; height: 10px; border-radius: 2px;
  &--subs    { background: var(--accent); }
  &--products{ background: var(--primary); }
}

.bar-chart {
  display: flex;
  align-items: flex-end;
  gap: 12px;
  height: 200px;
  padding: 0 40px 0 8px;
  position: relative;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.bar-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  height: 100%;
  position: relative;
  &:hover .bar-tooltip { opacity: 1; transform: translateY(-4px); }
}

.bar-stack {
  flex: 1;
  width: 100%;
  max-width: 40px;
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  gap: 2px;
  position: relative;
}

.bar {
  width: 100%;
  border-radius: 4px 4px 0 0;
  transition: height 0.6s cubic-bezier(.4,0,.2,1);
  min-height: 3px;
  &--subs    { background: var(--accent); opacity: 0.85; }
  &--products{ background: var(--primary); opacity: 0.7; }
}

.bar-tooltip {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%) translateY(0);
  background: #251a1a;
  border: 1px solid rgba(216,64,64,0.3);
  border-radius: 8px;
  padding: 10px 14px;
  font-size: 0.8rem;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.2s, transform 0.2s;
  pointer-events: none;
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 3px;
  strong { color: var(--accent); font-size: 0.95rem; }
  span { color: rgba(238,238,238,0.65); }
}

.bar-label { font-size: 0.78rem; color: rgba(238,238,238,0.45); font-weight: 600; }

.y-axis-labels {
  position: absolute;
  right: 0;
  top: 0;
  height: 200px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  font-size: 0.72rem;
  color: rgba(238,238,238,0.3);
  text-align: right;
  padding-right: 4px;
}

/* ── Breakdown ── */
.breakdown-grid {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 20px;
}

.breakdown-card { padding: 28px; }
.breakdown-title {
  font-family: var(--font-display);
  font-size: 1.2rem;
  letter-spacing: 0.05em;
  margin-bottom: 24px;
}

/* Donut */
.donut-wrapper { display: flex; justify-content: center; margin-bottom: 24px; }
.donut {
  position: relative;
  width: 160px; height: 160px;
}
.donut-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.donut-center {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
}
.donut-total { font-family: var(--font-display); font-size: 1.1rem; color: var(--light); }
.donut-label { font-size: 0.72rem; color: rgba(238,238,238,0.4); font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; }

.donut-legend { display: flex; flex-direction: column; gap: 12px; }
.donut-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.88rem;
  span { flex: 1; color: rgba(238,238,238,0.65); }
  strong { color: var(--light); font-size: 1rem; }
}

/* Month table */
.month-table { display: flex; flex-direction: column; gap: 10px; }
.month-row { display: flex; align-items: center; gap: 12px; }
.month-name { width: 32px; font-size: 0.78rem; font-weight: 700; color: rgba(238,238,238,0.5); text-align: right; flex-shrink: 0; }
.month-bar-wrapper { flex: 1; height: 8px; background: rgba(255,255,255,0.06); border-radius: 4px; overflow: hidden; }
.month-bar { height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); border-radius: 4px; transition: width 0.6s cubic-bezier(.4,0,.2,1); }
.month-total { width: 72px; text-align: right; font-size: 0.85rem; font-weight: 700; color: var(--light); }

/* Loading */
.loading-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 80px 20px; gap: 16px; color: rgba(238,238,238,0.4); }
.spinner-lg { width: 36px; height: 36px; border: 3px solid rgba(216,64,64,0.2); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

@media (max-width: 900px) {
  .breakdown-grid { grid-template-columns: 1fr; }
  .dash-header { flex-direction: column; }
}

@media (max-width: 600px) {
  .bar-chart { padding: 0 8px; }
  .kpi-grid { grid-template-columns: 1fr 1fr; }
}
