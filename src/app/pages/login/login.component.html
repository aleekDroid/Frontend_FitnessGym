<!-- src/app/pages/login/login.component.html -->
<div class="login-page">
  <!-- Background shapes -->
  <div class="bg-shape bg-shape--1"></div>
  <div class="bg-shape bg-shape--2"></div>

  <!-- Back button -->
  <button class="back-btn" (click)="goBack()">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <polyline points="15 18 9 12 15 6"/>
    </svg>
    Regresar
  </button>

  <div class="login-card">
    <!-- Logo -->
    <div class="logo-wrapper">
      <img src="assets/FitnessGym.PNG" alt="Fitness Gym" class="login-logo" />
    </div>

    <h1 class="login-title">Bienvenido</h1>
    <p class="login-subtitle">Ingresa tus credenciales para continuar</p>

    <!-- Error message -->
    @if (errorMsg()) {
      <div class="error-alert">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        {{ errorMsg() }}
      </div>
    }

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Number -->
      <div class="form-group">
        <label for="number">Número de teléfono</label>
        <div class="input-wrapper">
          <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 11.19 18.9 19.5 19.5 0 0 1 5.09 13 19.79 19.79 0 0 1 2 4.41 2 2 0 0 1 4 2.23h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l.81-.81a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
          </svg>
          <input
            id="number"
            type="text"
            formControlName="number"
            class="form-control with-icon"
            placeholder="Ej. 4421234567"
            [class.is-invalid]="f['number'].touched && f['number'].errors"
          />
        </div>
        @if (f['number'].touched && f['number'].errors?.['required']) {
          <span class="field-error">El número es obligatorio</span>
        }
        @if (f['number'].touched && f['number'].errors?.['minlength']) {
          <span class="field-error">Mínimo 7 dígitos</span>
        }
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <div class="input-wrapper">
          <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <input
            id="password"
            [type]="showPassword() ? 'text' : 'password'"
            formControlName="password"
            class="form-control with-icon with-icon-right"
            placeholder="Contraseña"
            [class.is-invalid]="f['password'].touched && f['password'].errors"
          />
          <button type="button" class="toggle-pass" (click)="togglePassword()">
            @if (showPassword()) {
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/><path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
            } @else {
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            }
          </button>
        </div>
        @if (f['password'].touched && f['password'].errors?.['required']) {
          <span class="field-error">La contraseña es obligatoria</span>
        }
      </div>

      <!-- Submit -->
      <button type="submit" class="btn btn-primary btn-full submit-btn" [disabled]="loading()">
        @if (loading()) {
          <span class="spinner"></span>
          Verificando...
        } @else {
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
          Iniciar sesión
        }
      </button>
    </form>

    <!-- Hint for demo -->
    <div class="demo-hint">
      <strong>Demo:</strong> admin → <code>123456789</code> / <code>admin123</code>
    </div>
  </div>
</div>
